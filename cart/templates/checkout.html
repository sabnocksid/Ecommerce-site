<div class="container mt-5">
  <h2>Checkout</h2>
  <div class="row">
      <!-- Cart Items Section -->
      <div class="col-md-8">
          <h4>Your Cart Items</h4>
          <div class="table-responsive">
              <table class="table">
                  <thead class="thead-light">
                      <tr>
                          <th>Image</th>
                          <th>Product</th>
                          <th>Price</th>
                          <th>Quantity</th>
                          <th>Total</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for item in cart %}
                      <tr>
                          <td>
                              <img src="{{ item.product.product_image.url }}" alt="{{ item.product.name }}" style="width: 100px; height: auto;">
                          </td>
                          <td>{{ item.product.name }}</td>
                          <td>Rs {{ item.price }}</td>
                          <td>{{ item.quantity }}</td>
                          <td>Rs {{ item.total_price }}</td>
                      </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>

      <div class="col-md-4">
          <div class="card">
              <div class="card-body">
                  <h4 class="card-title">Order Summary</h4>
                  <p><strong>Subtotal:</strong> Rs {{ totals.subtotal }}</p>
                  <p><strong>Discount:</strong> Rs {{ totals.discount_total }} ({{ totals.discount_percentage }}%)</p>
                  <h4><strong>Total:</strong> Rs {{ totals.total }}</h4>

                  <form action="{% url 'process_checkout' %}" method="POST">
                      {% csrf_token %}
                      <div class="form-group">
                          <label for="payment_method">Payment Method</label>
                          <select name="payment_method" class="form-control" required>
                              {% for method in PAYMENT_METHODS %}
                                  <option value="{{ method.0 }}">{{ method.1 }}</option>
                              {% endfor %}
                          </select>
                      </div>
                      <div class="form-group">
                          <label for="shipping_address">Shipping Address</label>
                          <textarea name="shipping_address" class="form-control" required></textarea>
                      </div>
                      <button type="submit" class="btn btn-primary btn-block">Place Order</button>
                  </form>
              </div>
          </div>
      </div>
  </div>
</div>
